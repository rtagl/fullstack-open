{"version":3,"sources":["services/persons.js","components/Filter.js","components/NewPersonForm.js","components/Notification.js","components/PersonsList.js","App.js","index.js"],"names":["baseUrl","personService","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","remove","delete","Filter","nameFilter","handleFilter","value","onChange","NewPersonForm","newName","newNumber","handleNewName","handleNewNumber","handleNewPersonSubmit","onSubmit","type","Notification","notification","message","className","style","color","PersonsList","personsToShow","handleDelete","map","person","i","name","number","onClick","App","useState","persons","setPersons","setNewName","setNewNumber","setNameFilter","setNotification","useEffect","initialPersons","filter","toLowerCase","includes","e","target","preventDefault","some","personToUpdate","find","window","confirm","returnedPerson","setTimeout","concat","personToDelete","catch","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1283ddfa.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst personService = { getAll, create, update, remove };\nexport default personService;\n","import React from 'react'\n\nconst Filter = ({nameFilter, handleFilter}) => {\n  return (\n    <div>\n      filter: <input value={nameFilter} onChange={handleFilter}/>\n    </div>\n  )\n}\n\nexport default Filter","import React from 'react'\n\nconst NewPersonForm = ({newName, newNumber, handleNewName, handleNewNumber, handleNewPersonSubmit}) => {\n  return (\n    <div>\n      <form onSubmit={handleNewPersonSubmit}>\n        <div>\n          name: <input value={newName} onChange={handleNewName}/>\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNewNumber}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default NewPersonForm","import React from \"react\";\n\nconst Notification = ({ notification }) => {\n  if (notification.message === null) {\n    return null;\n  } else {\n    return (\n      <div className=\"message\" style={{ color: notification.color }}>\n        {notification.message}\n      </div>\n    );\n  }\n};\n\nexport default Notification;\n","import React from \"react\";\n\nconst PersonsList = ({ personsToShow, handleDelete }) => {\n  return (\n    <div>\n      {personsToShow.map((person, i) => {\n        return (\n          <div key={i}>\n            {person.name} {person.number}\n            <button onClick={() => handleDelete(person.id)}>delete</button>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default PersonsList;\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport Filter from \"./components/Filter\";\nimport NewPersonForm from \"./components/NewPersonForm\";\nimport Notification from \"./components/Notification\";\nimport PersonsList from \"./components/PersonsList\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [nameFilter, setNameFilter] = useState(\"\");\n  const [notification, setNotification] = useState({\n    message: null,\n    color: null,\n  });\n\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => setPersons(initialPersons));\n  }, []);\n\n  const handleNewName = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNewNumber = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleNewPersonSubmit = (e) => {\n    e.preventDefault();\n\n    // check if a user exists\n    const personExists = persons.some(\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\n    );\n\n    if (personExists) {\n      let personToUpdate = persons.find(\n        (person) => person.name.toLowerCase() === newName.toLowerCase()\n      );\n\n      // confirm to update person object\n      if (window.confirm(`update ${personToUpdate.name}?`)) {\n        personToUpdate = { ...personToUpdate, number: newNumber };\n        personService\n          .update(personToUpdate.id, personToUpdate)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== personToUpdate.id ? person : returnedPerson\n              )\n            );\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setNotification({\n              message: `${returnedPerson.name}'s number has been updated`,\n              color: \"green\",\n            });\n            setTimeout(() => {\n              setNotification({ message: null, color: null });\n            }, 4000);\n          });\n      }\n    } else {\n      // if person does not exist, create new person object\n      const person = {\n        name: newName,\n        number: newNumber,\n      };\n      personService.create(person).then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setNotification({\n          message: `${returnedPerson.name} added`,\n          color: \"cyan\",\n        });\n        setTimeout(() => {\n          setNotification({ message: null, color: null });\n        }, 4000);\n      });\n    }\n  };\n\n  const handleFilter = (e) => {\n    setNameFilter(e.target.value);\n  };\n\n  const handleDelete = (id) => {\n    const personToDelete = persons.find((person) => person.id === id);\n    if (\n      window.confirm(`Are you sure you want to delete ${personToDelete.name}`)\n    ) {\n      personService\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter((person) => person.id !== id));\n          setNotification({\n            message: `${personToDelete.name} has been deleted`,\n            color: \"red\",\n          });\n          setTimeout(() => {\n            setNotification({ message: null, color: null });\n          }, 4000);\n        })\n        .catch((error) => {\n          setNotification({\n            message: `${personToDelete.name} has already been deleted`,\n            color: \"red\",\n          });\n          setTimeout(() => {\n            setNotification({ message: null, color: null });\n          }, 4000);\n        });\n    }\n  };\n\n  const personsToShow = persons.filter((person) =>\n    person.name.toLowerCase().includes(nameFilter.toLowerCase())\n  );\n\n  return (\n    <div>\n      <Notification notification={notification} />\n      <h2>Phonebook</h2>\n      <Filter nameFilter={nameFilter} handleFilter={handleFilter} />\n      <div>\n        <h2>Add a new</h2>\n        <NewPersonForm\n          newName={newName}\n          newNumber={newNumber}\n          handleNewName={handleNewName}\n          handleNewNumber={handleNewNumber}\n          handleNewPersonSubmit={handleNewPersonSubmit}\n        />\n      </div>\n      <h2>Numbers</h2>\n      <PersonsList personsToShow={personsToShow} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}